(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cfa1e154"],{8472:function(t,e,a){},"85f6":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-6 q-my-xl"},[a("q-card",[a("q-card-title",[t._v("Upraviť produkt")]),a("q-card-main",[a("q-field",{attrs:{count:50}},[a("q-input",{attrs:{"float-label":"Názov","max-length":"50"},model:{value:t.productName,callback:function(e){t.productName=e},expression:"productName"}})],1),a("q-field",{attrs:{count:5e3}},[a("q-input",{attrs:{type:"textarea","float-label":"Popis","max-height":100,rows:"7"},model:{value:t.productDescription,callback:function(e){t.productDescription=e},expression:"productDescription"}})],1),a("q-field",{attrs:{count:5}},[a("q-input",{attrs:{type:"text","float-label":"Veľkosť","max-length":"5"},model:{value:t.productSize,callback:function(e){t.productSize=e},expression:"productSize"}})],1),a("q-field",[a("q-input",{attrs:{type:"number","float-label":"Cena"},model:{value:t.productPrice,callback:function(e){t.productPrice=e},expression:"productPrice"}})],1),a("q-select",{attrs:{options:[{label:"Bicykle",value:1},{label:"Elektrobicykle",value:2},{label:"Oblečenie",value:3},{label:"Tretry",value:4},{label:"Komponenty",value:5},{label:"Príslušenstvo",value:6}],"float-label":"Kategória"},model:{value:t.productCategoryId,callback:function(e){t.productCategoryId=e},expression:"productCategoryId"}}),a("q-field",[a("q-input",{attrs:{type:"number","float-label":"Množstvo"},model:{value:t.productQuantity,callback:function(e){t.productQuantity=e},expression:"productQuantity"}})],1),a("q-field",{attrs:{count:25}},[a("q-input",{attrs:{type:"text","float-label":"Značka","max-length":"25"},model:{value:t.productBrand,callback:function(e){t.productBrand=e},expression:"productBrand"}})],1),a("q-field",{staticClass:"q-mt-lg",attrs:{helper:"Supported format: JPG, max. file size: 300KiB, max. uploaded files: 5"}},[a("q-uploader",{ref:"uploader",attrs:{url:t.pathImages,"max-file-size":"300","max-files":"5","float-label":"Obrázky",multiple:"",extensions:".jpg","hide-upload-button":"","auto-expand":""},on:{finish:function(e){t.uploadFinished()}}})],1),a("q-card-actions",{staticClass:"q-mt-md"},[a("div",{staticClass:"row justify-end full-width docs-btn"},[a("q-btn",{attrs:{color:"red",label:"Odstrániť produkt"},on:{click:t.removeProduct}}),a("q-btn",{attrs:{label:"Zatvoriť",flat:"",to:"/products/index"}}),a("q-btn",{attrs:{label:"Upraviť produkt",color:"primary"},on:{click:t.updateProduct}})],1)])],1)],1),a("q-card",{staticClass:"q-mt-md"},[a("q-card-title",[t._v("Zoznam obrázkov produktu")]),a("q-card-main",{staticClass:"row full-width justify-center items-center"},t._l(t.imagesNumber,function(e){return a("div",{key:e,staticClass:"row full-width justify-center items-center q-mb-lg"},[a("p",{staticClass:"hidden"},[t._v(t._s(t.temp=t.path+(e-1)))]),a("img",{staticClass:"img-circle w-70",attrs:{src:t.temp,alt:"Obrazok"}}),a("q-btn",{attrs:{color:"red",round:"",icon:"delete"},on:{click:function(a){t.deleteImage(e-1)}}})],1)}))],1)],1)},i=[];o._withStripped=!0;a("7f7f");var r=a("bc3a"),n=a.n(r),c={data:function(){return{images:"",imagesNumber:0,path:"http://127.0.0.1:8000/api/images/"+this.$route.params.id+"/",pathImages:"http://127.0.0.1:8000/api/images/upload/"+this.$route.params.id,productName:"",productDescription:"",productSize:"",productPrice:"",productCategoryId:"",productQuantity:"",productBrand:""}},methods:{updateProduct:function(){var t=this;n.a.put("http://127.0.0.1:8000/api/update/"+this.$route.params.id,this.productData).then(function(e){t.$refs.uploader.upload(),t.$q.notify({type:"positive",timeout:2e3,message:"Produkt bol úspešne aktualizovaný."})}).catch(function(e){t.$q.notify({type:"negative",timeout:2e3,message:"Vyskytla sa chyba."}),console.log(e)})},uploadFinished:function(){window.location.reload()},deleteImage:function(t){var e=this;n.a.get("http://127.0.0.1:8000/api/delImage/"+this.$route.params.id+"/"+t).then(function(){e.$q.notify({type:"positive",timeout:2e3,message:"Obrazok bol odstránený."}),window.location.reload()}).catch(function(){e.$q.notify({type:"negative",timeout:2e3,message:"Nastala chyba."})})},removeProduct:function(){var t=this;this.$q.dialog({title:"Vymazať",message:"Ste si istý že chete odstrániť produkt?",color:"primary",ok:!0,cancel:!0}).then(function(){n.a.delete("http://127.0.0.1:8000/api/delete-product/".concat(t.$route.params.id)).then(function(){t.$q.notify({type:"positive",timeout:2e3,message:"Produkt bol odstránený."}),t.$router.push("/products/index")}).catch(function(e){t.$q.notify({type:"negative",timeout:2e3,message:"Nastala chyba."}),console.log(e)})}).catch(function(){})},loadProduct:function(){var t=this;n.a.get("http://127.0.0.1:8000/api/edit/"+this.$route.params.id).then(function(e){t.productName=e.data.name,t.productDescription=e.data.description,t.productSize=e.data.size,t.productPrice=e.data.price,t.productCategoryId=e.data.category_id,t.productQuantity=e.data.quantity,t.productBrand=e.data.brand}).catch(function(e){t.$q.notify({type:"negative",timeout:2e3,message:"Loading product: an error has been occured."}),console.log(e)})},loadImages:function(){var t=this;n.a.get("http://127.0.0.1:8000/api/imagesNumber/"+this.$route.params.id).then(function(e){t.imagesNumber=e.data,console.log(t.imagesNumber)})}},mounted:function(){this.loadProduct(),this.loadImages()},computed:{productData:function(){return{name:this.productName,description:this.productDescription,size:this.productSize,price:this.productPrice,category_id:this.productCategoryId,quantity:this.productQuantity,brand:this.productBrand}}}},u=c,s=(a("c8e9"),a("2877")),l=Object(s["a"])(u,o,i,!1,null,null,null);l.options.__file="Edit.vue";e["default"]=l.exports},c8e9:function(t,e,a){"use strict";var o=a("8472"),i=a.n(o);i.a}}]);